"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[466],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(a),c=r,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||i;return a?n.createElement(k,o(o({ref:t},d),{},{components:a})):n.createElement(k,o({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6435:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const i={},o="Table Methods",l={unversionedId:"table/methods",id:"table/methods",title:"Table Methods",description:"query",source:"@site/docs/table/methods.md",sourceDirName:"table",slug:"/table/methods",permalink:"/docs/table/methods",draft:!1,editUrl:"https://github.com/jeremydaly/dynamodb-toolbox/tree/main/docs/docs/table/methods.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Table Properties",permalink:"/docs/table/properties"},next:{title:"Entity",permalink:"/docs/entity/"}},p={},s=[{value:"query",id:"query",level:2},{value:"query(partitionKey ,options)",id:"querypartitionkey-options",level:4},{value:"scan",id:"scan",level:2},{value:"scan(options)",id:"scanoptions",level:4},{value:"batchGet",id:"batchget",level:2},{value:"batchGet(items ,options)",id:"batchgetitems-options",level:4},{value:"Specifying options for multiple tables",id:"specifying-options-for-multiple-tables",level:3},{value:"batchWrite",id:"batchwrite",level:2},{value:"batchWrite(items ,options)",id:"batchwriteitems-options",level:4},{value:"transactGet",id:"transactget",level:2},{value:"transactGet(items ,options)",id:"transactgetitems-options",level:4},{value:"Accessing items from multiple tables",id:"accessing-items-from-multiple-tables",level:3},{value:"transactWrite",id:"transactwrite",level:2},{value:"transactWrite(items ,options)",id:"transactwriteitems-options",level:4},{value:"Entity Convenience Methods",id:"entity-convenience-methods",level:2},{value:"parse",id:"parse",level:3},{value:"parse(entity, input ,include)",id:"parseentity-input-include",level:4},{value:"get",id:"get",level:3},{value:"get(entity, key ,options)",id:"getentity-key-options",level:4},{value:"delete",id:"delete",level:3},{value:"delete(entity, key ,options)",id:"deleteentity-key-options",level:4},{value:"put",id:"put",level:3},{value:"put(entity, item ,options)",id:"putentity-item-options",level:4},{value:"update",id:"update",level:3},{value:"update(entity, key ,options)",id:"updateentity-key-options",level:4}],d={toc:s};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"table-methods"},"Table Methods"),(0,r.kt)("h2",{id:"query"},"query"),(0,r.kt)("h4",{id:"querypartitionkey-options"},"query(partitionKey ","[,options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The Query operation finds items based on primary key values. You can query any table or secondary index that has a composite primary key (a partition key and a sort key).")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html"},"DynamoDB Query API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"Query")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"queryParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"query()")," method accepts three arguments. The first argument is used to specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"partitionKey")," you wish to query against (KeyConditionExpression). The value must match the type of your table's partition key."),(0,r.kt)("p",null,"The second argument is an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object that specifies the details of your query. The following options are all optional (corresponding Query API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"index"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of secondary index to query. If not specified, the query executes on the primary index. The index must include the table's ",(0,r.kt)("inlineCode",{parentName:"td"},"entityField")," attribute for automatic parsing of returned data. (IndexName)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"limit"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"The maximum number of items to retrieve per query. (Limit)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reverse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Reverse the order or returned items. (ScanIndexForward)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"consistent"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable a consistent read of the items (ConsistentRead)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"select"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The attributes to be returned in the result. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"all_attributes"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"all_projected_attributes"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"specific_attributes"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"count")," (Select)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eq"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"equal")," to supplied value. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lt"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"less than")," supplied value. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lte"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"less than or equal to")," supplied value. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"gt"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"greater than")," supplied value. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"gte"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"greater than or equal to")," supplied value. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"between"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to be ",(0,r.kt)("em",{parentName:"td"},"between")," the supplied values. Array should have two values matching the ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," type. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"beginsWith"),(0,r.kt)("td",{parentName:"tr",align:"center"},"same as ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," condition to ",(0,r.kt)("em",{parentName:"td"},"begin with")," the supplied values. (KeyConditionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"filters"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"A complex ",(0,r.kt)("inlineCode",{parentName:"td"},"object")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"array")," of objects that specifies the query's filter condition. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/filters-and-conditions"},"Filters and Conditions"),". (FilterExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attributes"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"An ",(0,r.kt)("inlineCode",{parentName:"td"},"array")," or array of complex ",(0,r.kt)("inlineCode",{parentName:"td"},"objects")," that specify which attributes should be returned. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/projection-expressions"},"Projection Expression")," below (ProjectionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"startKey"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"An object that contains the ",(0,r.kt)("inlineCode",{parentName:"td"},"partitionKey")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," of the first item that this operation will evaluate (if you're querying a secondary index, the keys for the primary index will also need to be included in the object - see ",(0,r.kt)("inlineCode",{parentName:"td"},"LastEvaluatedKey")," result for details). (ExclusiveStartKey)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"entity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of a table Entity to evaluate ",(0,r.kt)("inlineCode",{parentName:"td"},"filters")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"attributes")," against.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parseAsEntity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the entity to parse the results as.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")))),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional third argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const result = await MyTable.query(\n  'user#12345', // partition key\n  {\n    limit: 50, // limit to 50 items\n    beginsWith: 'order#', // select items where sort key begins with value\n    reverse: true, // return items in descending order (newest first)\n    capacity: 'indexes', // return the total capacity consumed by the indexes\n    filters: { attr: 'total', gt: 100 }, // only show orders above $100\n    index: 'GSI1' // query the GSI1 secondary index\n  }\n)\n")),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html"},"DynamoDB Query API"),". In TS, type inference is not applied. If ",(0,r.kt)("inlineCode",{parentName:"p"},"autoExecute")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"autoParse")," are enabled, any ",(0,r.kt)("inlineCode",{parentName:"p"},"Items")," data returned will be parsed into its corresponding Entity's aliases. Otherwise, the DocumentClient will return the unmarshalled data. If the response is parsed by the library, a ",(0,r.kt)("inlineCode",{parentName:"p"},".next()")," method will be available on the returned object. Calling this function will call the ",(0,r.kt)("inlineCode",{parentName:"p"},"query")," method again using the same parameters and passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"LastEvaluatedKey")," in as the ",(0,r.kt)("inlineCode",{parentName:"p"},"ExclusiveStartKey"),". This is a convenience method for paginating the results."),(0,r.kt)("h2",{id:"scan"},"scan"),(0,r.kt)("h4",{id:"scanoptions"},"scan(","[options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The Scan operation returns one or more items and item attributes by accessing every item in a table or a secondary index.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"scan")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Scan.html"},"DynamoDB Scan API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"scan")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"Scan")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"scan")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"scanParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"scan()")," method accepts two arguments. The first argument is an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object that specifies the details of your scan. The following options are all optional (corresponding Scan API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"index"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Name of secondary index to scan. If not specified, the query executes on the primary index. The index must include the table's ",(0,r.kt)("inlineCode",{parentName:"td"},"entityField")," attribute for automatic parsing of returned data. (IndexName)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"limit"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"The maximum number of items to retrieve per scan. (Limit)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"consistent"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable a consistent read of the items (ConsistentRead)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"select"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The attributes to be returned in the result. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"all_attributes"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"all_projected_attributes"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"specific_attributes"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"count")," (Select)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"filters"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"A complex ",(0,r.kt)("inlineCode",{parentName:"td"},"object")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"array")," of objects that specifies the scan's filter condition. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/filters-and-conditions"},"Filters and Conditions"),". (FilterExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attributes"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"An ",(0,r.kt)("inlineCode",{parentName:"td"},"array")," or array of complex ",(0,r.kt)("inlineCode",{parentName:"td"},"objects")," that specify which attributes should be returned. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/projection-expressions"},"Projection Expression")," below (ProjectionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"startKey"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"An object that contains the ",(0,r.kt)("inlineCode",{parentName:"td"},"partitionKey")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"sortKey")," of the first item that this operation will evaluate. (ExclusiveStartKey)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"segments"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"For a parallel ",(0,r.kt)("inlineCode",{parentName:"td"},"scan")," request, ",(0,r.kt)("inlineCode",{parentName:"td"},"segments")," represents the total number of segments into which the ",(0,r.kt)("inlineCode",{parentName:"td"},"scan")," operation will be divided. (TotalSegments)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"segment"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"For a parallel ",(0,r.kt)("inlineCode",{parentName:"td"},"scan")," request, ",(0,r.kt)("inlineCode",{parentName:"td"},"segment")," identifies an individual segment to be scanned by an application worker. (Segment)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"entity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of a table Entity to evaluate ",(0,r.kt)("inlineCode",{parentName:"td"},"filters")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"attributes")," against.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parseAsEntity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the entity to parse the results as.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")))),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional second argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const result = await MyTable.scan({\n  limit: 100, // limit to 50 items\n  capacity: 'indexes', // return the total capacity consumed by the indexes\n  filters: { attr: 'total', between: [100, 500] }, // only return orders between $100 and $500\n  index: 'GSI1' // scan the GSI1 secondary index\n})\n")),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Scan.html"},"DynamoDB Scan API"),". In TS, type inference is not applied. If ",(0,r.kt)("inlineCode",{parentName:"p"},"autoExecute")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"autoParse")," are enabled, any ",(0,r.kt)("inlineCode",{parentName:"p"},"Items")," data returned will be parsed into its corresponding Entity's aliases. Otherwise, the DocumentClient will return the unmarshalled data. If the response is parsed by the library, a ",(0,r.kt)("inlineCode",{parentName:"p"},".next()")," method will be available on the returned object. Calling this function will call the ",(0,r.kt)("inlineCode",{parentName:"p"},"scan")," method again using the same parameters and passing the ",(0,r.kt)("inlineCode",{parentName:"p"},"LastEvaluatedKey")," in as the ",(0,r.kt)("inlineCode",{parentName:"p"},"ExclusiveStartKey"),". This is a convenience method for paginating the results."),(0,r.kt)("h2",{id:"batchget"},"batchGet"),(0,r.kt)("h4",{id:"batchgetitems-options"},"batchGet(items ","[,options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The BatchGetItem operation returns the attributes of one or more items from one or more tables. You identify requested items by primary key.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGet")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchGetItem.html"},"DynamoDB BatchGetItem API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGet")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"BatchGetItem")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGet")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGetParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGet")," method accepts three arguments. The first is an ",(0,r.kt)("inlineCode",{parentName:"p"},"array")," of item keys to get. The DynamoDB Toolbox provides the ",(0,r.kt)("inlineCode",{parentName:"p"},"getBatch")," method on your entities to help you generate the proper key configuration. You can specify different entity types as well as entities from different tables, and this library will handle the proper payload construction."),(0,r.kt)("p",null,"The optional second argument accepts an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object. The following options are all optional (corresponding BatchGetItem API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"consistent"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")," (see below)"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable a consistent read of the items (ConsistentRead)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attributes"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"array")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")," (see below)"),(0,r.kt)("td",{parentName:"tr",align:null},"An ",(0,r.kt)("inlineCode",{parentName:"td"},"array")," or array of complex ",(0,r.kt)("inlineCode",{parentName:"td"},"objects")," that specify which attributes should be returned. See ",(0,r.kt)("a",{parentName:"td",href:"/docs/projection-expressions"},"Projection Expression")," below (ProjectionExpression)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")))),(0,r.kt)("h3",{id:"specifying-options-for-multiple-tables"},"Specifying options for multiple tables"),(0,r.kt)("p",null,"The library is built for making working with single table designs easier, but it is possible that you may need to retrieve data from multiple tables within the same batch get. If your ",(0,r.kt)("inlineCode",{parentName:"p"},"items")," contain references to multiple tables, the ",(0,r.kt)("inlineCode",{parentName:"p"},"consistent")," option will accept objects that use either the table ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"alias")," as the key, and the setting as the value. For example, to specify different ",(0,r.kt)("inlineCode",{parentName:"p"},"consistent")," settings on two tables, you would use something like following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const results = await MyTable.batchGet(\n  // ... ,\n  {\n    consistent: {\n      'my-table-name': true,\n      'my-other-table-name': false\n    }\n    // ...\n  }\n)\n")),(0,r.kt)("p",null,"Setting either value without the ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," structure will set the option for all referenced tables. If you are referencing multiple tables and using the ",(0,r.kt)("inlineCode",{parentName:"p"},"attributes")," option, then you must use the same ",(0,r.kt)("inlineCode",{parentName:"p"},"object")," method to specify the table ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"alias"),". The value should follow the standard ",(0,r.kt)("a",{parentName:"p",href:"/docs/projection-expressions"},"Projection Expression")," formatting."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const results = await MyTable.batchGet(\n  [\n    MyTable.User.getBatch({ family: 'Brady', name: 'Mike' }),\n    MyTable.User.getBatch({ family: 'Brady', name: 'Carol' }),\n    MyTable.Pet.getBatch({ family: 'Brady', name: 'Tiger' })\n  ],\n  {\n    capacity: 'total',\n    attributes: [\n        'name', 'family',\n        { User: ['dob', 'age'] },\n        { Pet: ['petType','lastVetCheck'] }\n      ]\n    }\n  }\n)\n")),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional third argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchGetItem.html"},"DynamoDB BatchGetItem API"),". In TS, type inference is not applied. If ",(0,r.kt)("inlineCode",{parentName:"p"},"autoExecute")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"autoParse")," are enabled, any ",(0,r.kt)("inlineCode",{parentName:"p"},"Responses")," data returned will be parsed into its corresponding Entity's aliases. Otherwise, the DocumentClient will return the unmarshalled data. If the response is parsed by the library, a ",(0,r.kt)("inlineCode",{parentName:"p"},".next()")," method will be available on the returned object. Calling this function will call the ",(0,r.kt)("inlineCode",{parentName:"p"},"batchGet")," method again using the same options and passing any ",(0,r.kt)("inlineCode",{parentName:"p"},"UnprocessedKeys")," in as the ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestItems"),". This is a convenience method for retrying unprocessed keys."),(0,r.kt)("h2",{id:"batchwrite"},"batchWrite"),(0,r.kt)("h4",{id:"batchwriteitems-options"},"batchWrite(items ","[,options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The BatchWriteItem operation puts or deletes multiple items in one or more tables. A single call to BatchWriteItem can write up to 16 MB of data, which can comprise as many as 25 put or delete requests.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWrite")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html"},"DynamoDB BatchWriteItem API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWrite")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"BatchWriteItem")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWrite")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWriteParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWrite")," method accepts three arguments. The first is an ",(0,r.kt)("inlineCode",{parentName:"p"},"array")," of item keys to either ",(0,r.kt)("inlineCode",{parentName:"p"},"put")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"delete"),". The DynamoDB Toolbox provides a ",(0,r.kt)("inlineCode",{parentName:"p"},"putBatch")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"deleteBatch")," method on your entities to help you generate the proper key configuration for each item. You can specify different entity types as well as entities from different tables, and this library will handle the proper payload construction."),(0,r.kt)("p",null,"The optional second argument accepts an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object. The following options are all optional (corresponding BatchWriteItem API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"object")," (see below)"),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"metrics"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return item collection metrics. If set to ",(0,r.kt)("inlineCode",{parentName:"td"},"size"),", the response includes statistics about item collections, if any, that were modified during the operation are returned in the response. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"size")," (ReturnItemCollectionMetrics)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE:")," The ",(0,r.kt)("inlineCode",{parentName:"p"},"BatchWriteItem")," does not support conditions or return deleted items. ",(0,r.kt)("em",{parentName:"p"},'"BatchWriteItem does not behave in the same way as individual PutItem and DeleteItem calls would. For example, you cannot specify conditions on individual put and delete requests, and BatchWriteItem does not return deleted items in the response."')," ~ ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html"},"DynamoDB BatchWriteItem API")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const result = await Default.batchWrite(\n  [\n    MyTable.User.putBatch({ family: 'Brady', name: 'Carol', age: 40, roles: ['mother', 'wife'] }),\n    MyTable.User.putBatch({ family: 'Brady', name: 'Mike', age: 42, roles: ['father', 'husband'] }),\n    MyTable.Pet.deleteBatch({ family: 'Brady', name: 'Tiger' })\n  ],\n  {\n    capacity: 'total',\n    metrics: 'size'\n  }\n)\n")),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional third argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html"},"DynamoDB BatchWriteItem API"),". If ",(0,r.kt)("inlineCode",{parentName:"p"},"autoExecute")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"autoParse")," are enabled, a ",(0,r.kt)("inlineCode",{parentName:"p"},".next()")," method will be available on the returned object. Calling this function will call the ",(0,r.kt)("inlineCode",{parentName:"p"},"batchWrite")," method again using the same options and passing any ",(0,r.kt)("inlineCode",{parentName:"p"},"UnprocessedItems")," in as the ",(0,r.kt)("inlineCode",{parentName:"p"},"RequestItems"),". This is a convenience method for retrying unprocessed keys."),(0,r.kt)("h2",{id:"transactget"},"transactGet"),(0,r.kt)("h4",{id:"transactgetitems-options"},"transactGet(items ","[,options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"TransactGetItems is a synchronous operation that atomically retrieves multiple items from one or more tables (but not from indexes) in a single account and Region.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactGet")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactGetItems.html"},"DynamoDB TransactGetItems API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"transactGet")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"TransactGetItem")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactGet")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"transactGetParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactGet")," method accepts three arguments. The first is an ",(0,r.kt)("inlineCode",{parentName:"p"},"array")," of item keys to get. The DynamoDB Toolbox provides the ",(0,r.kt)("inlineCode",{parentName:"p"},"getTransaction")," method on your entities to help you generate the proper key configuration. You can specify different entity types as well as entities from different tables, and this library will handle the proper payload construction."),(0,r.kt)("p",null,"The optional second argument accepts an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object. The following options are all optional (corresponding TransactGetItems API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Table"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Table"),")")))),(0,r.kt)("h3",{id:"accessing-items-from-multiple-tables"},"Accessing items from multiple tables"),(0,r.kt)("p",null,"Transaction items are atomic, so each ",(0,r.kt)("inlineCode",{parentName:"p"},"Get")," contains the table name and key necessary to retrieve the item. The library will automatically handle adding the necessary information and will parse each entity automatically for you."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const results = await MyTable.transactGet(\n  [\n    User.getTransaction({ family: 'Brady', name: 'Mike' }),\n    User.getTransaction({ family: 'Brady', name: 'Carol' }),\n    Pet.getTransaction({ family: 'Brady', name: 'Tiger' })\n  ],\n  { capacity: 'total' }\n)\n")),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional third argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactGetItems.html"},"DynamoDB TransactGetItems API"),". In TS, type inference is not applied. If ",(0,r.kt)("inlineCode",{parentName:"p"},"autoExecute")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"autoParse")," are enabled, any ",(0,r.kt)("inlineCode",{parentName:"p"},"Responses")," data returned will be parsed into its corresponding Entity's aliases. Otherwise, the DocumentClient will return the unmarshalled data."),(0,r.kt)("h2",{id:"transactwrite"},"transactWrite"),(0,r.kt)("h4",{id:"transactwriteitems-options"},"transactWrite(items ","[,options][,parameters]",")"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"TransactWriteItems is a synchronous write operation that groups up to 25 action requests. The actions are completed atomically so that either all of them succeed, or all of them fail.")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactWrite")," method is a wrapper for the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html"},"DynamoDB TransactWriteItems API"),". The DynamoDB Toolbox ",(0,r.kt)("inlineCode",{parentName:"p"},"transactWrite")," method supports all ",(0,r.kt)("strong",{parentName:"p"},"TransactWriteItems")," API operations. The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactWrite")," method returns a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," and you must use ",(0,r.kt)("inlineCode",{parentName:"p"},"await")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".then()")," to retrieve the results. An alternative, synchronous method named ",(0,r.kt)("inlineCode",{parentName:"p"},"transactWriteParams")," can be used, but will only retrieve the generated parameters."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"transactWrite")," method accepts three arguments. The first is an ",(0,r.kt)("inlineCode",{parentName:"p"},"array")," of item keys to either ",(0,r.kt)("inlineCode",{parentName:"p"},"put"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"delete"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"conditionCheck"),". The DynamoDB Toolbox provides ",(0,r.kt)("inlineCode",{parentName:"p"},"putTransaction"),",",(0,r.kt)("inlineCode",{parentName:"p"},"deleteTransaction"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"updateTransaction"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"conditionCheck")," methods on your entities to help you generate the proper configuration for each item. You can specify different entity types as well as entities from different tables, and this library will handle the proper payload construction."),(0,r.kt)("p",null,"The optional second argument accepts an ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," object. The following options are all optional (corresponding TransactWriteItems API references in parentheses):"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Option"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"capacity"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return the amount of consumed capacity. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"total"),", or ",(0,r.kt)("inlineCode",{parentName:"td"},"indexes")," (ReturnConsumedCapacity)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"metrics"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Return item collection metrics. If set to ",(0,r.kt)("inlineCode",{parentName:"td"},"size"),", the response includes statistics about item collections, if any, that were modified during the operation are returned in the response. One of either ",(0,r.kt)("inlineCode",{parentName:"td"},"none")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"size")," (ReturnItemCollectionMetrics)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"token"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional token to make the call idempotent, meaning that multiple identical calls have the same effect as one single call. (ClientRequestToken)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"execute"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic execution of the DocumentClient method (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parse"),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"boolean")),(0,r.kt)("td",{parentName:"tr",align:null},"Enables/disables automatic parsing of returned data when ",(0,r.kt)("inlineCode",{parentName:"td"},"autoExecute")," evaluates to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," (default: ",(0,r.kt)("em",{parentName:"td"},"inherited from Entity"),")")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const result = await Default.transactWrite(\n  [\n    Pet.conditionCheck({ family: 'Brady', name: 'Tiger' }, { conditions: { attr: 'alive', eq: false } },\n    Pet.deleteTransaction({ family: 'Brady', name: 'Tiger' }),\n    User.putTransaction({ family: 'Brady', name: 'Carol', age: 40, roles: ['mother','wife'] }),\n    User.putTransaction({ family: 'Brady', name: 'Mike', age: 42, roles: ['father','husband'] }),\n    User.putTransaction({ family: 'Brady', name: 'Mike', age: 42, unmappedField: 'unmappedValue' }, { strictSchemaCheck: false})\n  ],{\n    capacity: 'total',\n    metrics: 'size',\n  }\n)\n")),(0,r.kt)("p",null,"If you prefer to specify your own parameters, the optional third argument allows you to add custom parameters. ",(0,r.kt)("a",{parentName:"p",href:"/docs/custom-parameters"},"See Adding custom parameters and clauses")," for more information."),(0,r.kt)("h3",null,"Return Data"),(0,r.kt)("p",null,"The data is returned with the same response syntax as the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html"},"DynamoDB TransactWriteItems API"),"."),(0,r.kt)("h2",{id:"entity-convenience-methods"},"Entity Convenience Methods"),(0,r.kt)("p",null,"The following methods allow you to execute ",(0,r.kt)("inlineCode",{parentName:"p"},"Entity")," methods directly from your ",(0,r.kt)("inlineCode",{parentName:"p"},"Table")," instances. An ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be specified as the first argument to allow the ",(0,r.kt)("inlineCode",{parentName:"p"},"Table")," instance to determine the correct entity type."),(0,r.kt)("h3",{id:"parse"},"parse"),(0,r.kt)("h4",{id:"parseentity-input-include"},"parse(entity, input ","[,include]",")"),(0,r.kt)("p",null,"Executes the ",(0,r.kt)("inlineCode",{parentName:"p"},"parse")," method of the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"entity"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," that references the name of an Entity associated with the table. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/entity/methods#parse"},"Entity ",(0,r.kt)("inlineCode",{parentName:"a"},"parse")," method")," for additional parameters and behavior. In TS, type inference is not applied."),(0,r.kt)("h3",{id:"get"},"get"),(0,r.kt)("h4",{id:"getentity-key-options"},"get(entity, key ","[,options][,parameters]",")"),(0,r.kt)("p",null,"Executes the ",(0,r.kt)("inlineCode",{parentName:"p"},"get")," method of the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"entity"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," that references the name of an Entity associated with the table. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/entity/methods#get"},"Entity ",(0,r.kt)("inlineCode",{parentName:"a"},"get")," method")," for additional parameters and behavior. In TS, type inference is not applied."),(0,r.kt)("h3",{id:"delete"},"delete"),(0,r.kt)("h4",{id:"deleteentity-key-options"},"delete(entity, key ","[,options][,parameters]",")"),(0,r.kt)("p",null,"Executes the ",(0,r.kt)("inlineCode",{parentName:"p"},"delete")," method of the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"entity"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," that references the name of an Entity associated with the table. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/entity/methods#delete"},"Entity ",(0,r.kt)("inlineCode",{parentName:"a"},"delete")," method")," for additional parameters and behavior."),(0,r.kt)("h3",{id:"put"},"put"),(0,r.kt)("h4",{id:"putentity-item-options"},"put(entity, item ","[,options][,parameters]",")"),(0,r.kt)("p",null,"Executes the ",(0,r.kt)("inlineCode",{parentName:"p"},"put")," method of the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"entity"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," that references the name of an Entity associated with the table. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/entity/methods#put"},"Entity ",(0,r.kt)("inlineCode",{parentName:"a"},"put")," method")," for additional parameters and behavior."),(0,r.kt)("h3",{id:"update"},"update"),(0,r.kt)("h4",{id:"updateentity-key-options"},"update(entity, key ","[,options][,parameters]",")"),(0,r.kt)("p",null,"Executes the ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," method of the supplied ",(0,r.kt)("inlineCode",{parentName:"p"},"entity"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"entity")," must be a ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," that references the name of an Entity associated with the table. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/entity/methods#update"},"Entity ",(0,r.kt)("inlineCode",{parentName:"a"},"update")," method")," for additional parameters and behavior."))}m.isMDXComponent=!0}}]);